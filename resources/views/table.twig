{% extends '@fromselect/layout.twig' %}

{% import '@fromselect/parts/macros.twig' as macros %}

{% block main %}
    <nav class="navbar">
        <h2>Table navigation</h2>
        <ul>
            <li class="current"><a href="{{ path_for('table.show', {'database': current.database, 'table': current.table}, queryParams) }}">Tables</a></li>
            <li><a href="#">Operations</a></li>
        </ul>
    </nav>
    <div class="content">
        {{ macros.query(query.query, query.executionTime, '#') }}
        <div class="columns">
            {{ macros.dataNavigation(pagination) }}
            <form action="#" method="post" class="actions" id="actions">
                <span>Selected:</span>
                <input type="submit" value="Delete">
            </form>
        </div>
        <table class="main-table">
            <thead>
                <tr>
                    <th></th>
                    {% for column in data[0]|keys %}
                        {% set order = {'order': column == queryParams.sort ? (not queryParams.order ?: null) : null} %}
                        <th {{ column == queryParams.sort ? 'class="current"' }}>
                            <a href="{{ path_for(route.name, route.arguments, queryParams|merge({'sort': column})|merge(order)) }}">{{ column }}</a>
                        </th>
                    {% endfor %}
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                    <tr>
                        <td>
                            <label for="check{{ loop.index }}">Check</label>
                            <input type="checkbox" id="check{{ loop.index }}" name="row[]" value="lol" form="actions">
                        </td>
                        {% for column in row %}
                            <td>{{ column }}</td>
                        {% endfor %}
                    </tr>
                {% else %}
                    <tr><td>No rows found.</td></tr>
                {% endfor %}
            </tbody>
            <tfoot>
                <tr>
                    <th></th>
                    {% for column in data[0]|keys %}
                        {% set order = {'order': queryParams.sort == column ? (not queryParams.order ?: null) : null} %}
                        <th {{ column == queryParams.sort ? 'class="current"' }}>
                            <a href="{{ path_for(route.name, route.arguments, queryParams|merge({'sort': column})|merge(order)) }}">{{ column }}</a>
                        </th>
                    {% endfor %}
                </tr>
            </tfoot>
        </table>
        {{ macros.dataNavigation(pagination) }}
    </div>
{% endblock %}
